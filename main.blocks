<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable type="KIND_SpriteKind" id="VjXFz)ZM0_d0GDh5EWEY">player1</variable><variable type="KIND_SpriteKind" id="Z$u)7j^7i_.#I=A1RJje">player2</variable></variables><block type="pxt-on-start" id="x*/^TxJ!F7.?S-hcL=37" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="Wg=sb%F/#![W*0vdWv1W"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Player {" line1="    sprite: Sprite" line2="    private _next_flap_at: number" line3="    constructor(player: number) {" line4="        this.sprite = sprites.create(assets.image`duck left`, player == 1 ? SpriteKind.player1 : SpriteKind.player2)" line5="        if (player == 1) {" line6="            info.player1.setLife(3)" line7="            controller.player1.moveSprite(this.sprite, 50, 0)" line8="            this.add_button_handler(1)" line9="            tiles.placeOnTile(this.sprite, tiles.getTileLocation(0, 6))" line10="        } else {" line11="            info.player2.setLife(3)" line12="            controller.player2.moveSprite(this.sprite, 50, 0)" line13="            this.add_button_handler(2)" line14="            tiles.placeOnTile(this.sprite, tiles.getTileLocation(9, 6))" line15="        }" line16="        " line17="        this.sprite.setFlag(SpriteFlag.StayInScreen, true)" line18="        this.sprite.ay = 100" line19="        this._next_flap_at = 0" line20="        this.add_overlap_handler()" line21="    }" line22="    " line23="    public add_button_handler(player: number) {" line24="        function on_button_event_a_pressed() {" line25="            if (game.runtime() &gt; this._next_flap_at) {" line26="                this.sprite.vy = -50" line27="                this._next_flap_at = game.runtime() + 500" line28="            }" line29="            " line30="        }" line31="        " line32="        if (player == 1) {" line33="            controller.player1.onButtonEvent(ControllerButton.A, ControllerButtonEvent.Pressed, on_button_event_a_pressed)" line34="        } else {" line35="            controller.player2.onButtonEvent(ControllerButton.A, ControllerButtonEvent.Pressed, on_button_event_a_pressed)" line36="        }" line37="        " line38="    }" line39="    " line40="    public add_overlap_handler() {" line41="        sprites.onOverlap(SpriteKind.player1, SpriteKind.player2, function on_overlap(p1sprite: Sprite, p2sprite: Sprite) {" line42="            if (p1sprite.y &gt; p2sprite.y) {" line43="                p1sprite.destroy(effects.ashes)" line44="                info.player1.changeLifeBy(-1)" line45="                player22.sprite.vy = -50" line46="            } else if (p1sprite.y &lt; p2sprite.y) {" line47="                p2sprite.destroy(effects.ashes)" line48="                info.player2.changeLifeBy(-1)" line49="                player12.sprite.vy = -50" line50="            } else if (p1sprite.x &gt; p2sprite.x) {" line51="                p1sprite.vx = 50" line52="                p2sprite.vx = -50" line53="            } else {" line54="                p1sprite.vx = -50" line55="                p2sprite.vx = 50" line56="            }" line57="            " line58="        })" line59="    }" line60="    " line61="}" numlines="62"></mutation><next><block type="typescript_statement" id="!kkOvIu/D_aK5$HLl|Qq"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let player12 = new Player(1)" numlines="1" declaredvars="player12"></mutation><next><block type="typescript_statement" id="ps-[G,1tqY)_0KYtv1fV"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let player22 = new Player(2)" numlines="1" declaredvars="player22"></mutation><next><block type="tilemap_loadMap" id="c;ERDcI4[ejx%m#R}6a8"><value name="map"><shadow type="create_overworld_map" id="]osn([/s%H|hwYo%BQ5,"><field name="tilemap"></field></shadow><block type="create_small_overworld_map" id="?t8Fqu9K{##Uppi3W!$T"><field name="tilemap">tilemap`level1`</field><data>{"commentRefs":[],"fieldData":{"tilemap":"level1"}}</data></block></value><next><block type="mapplaceontile" id="iS1^oT/_b]bHN3cJ3v7c"><value name="sprite"><block type="typescript_expression" id="^!lA#nddjv6N92]Ub-qw"><field name="EXPRESSION">player12.sprite</field></block></value><value name="loc"><shadow type="mapgettile" id="b~z48+|8.IUiJze;G.Fg"><value name="col"><shadow type="math_number" id="T@@!8Qr0][;d)(LS`ad@"><field name="NUM">1</field></shadow></value><value name="row"><shadow type="math_number" id="@_!#6.Jj7W(EGQ[?2kF/"><field name="NUM">6</field></shadow></value></shadow></value><next><block type="mapplaceontile" id="z|AiE+ttbG:UObU[!##Q"><value name="sprite"><block type="typescript_expression" id="B$UVDPCEm/VskqOd0?M:"><field name="EXPRESSION">player22.sprite</field></block></value><value name="loc"><shadow type="mapgettile" id="!)]5oXNqs!m@btr-3REy"><value name="col"><shadow type="math_number" id="/3~u3q)=ZtO(W)W6LTDI"><field name="NUM">8</field></shadow></value><value name="row"><shadow type="math_number" id="q_B9Dsr-!_cwxn3;[^ky"><field name="NUM">6</field></shadow></value></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>